{{define "title"}}{{.Image.Title}} | i.k8r{{end}}
{{define "content"}}
<div class="page image detail">
    <div class="detail">
    {{if .IsMine}}
        <h2 class="title fake-input" contenteditable="true" placeholder="Title">{{.Image.Title}}</h2>
    {{else}}
        <h2 class="title">{{.Image.Title}}</h2>
    {{end}}
        <a class="image" href="/{{.Image.Id}}">
            <img src="/{{.Image.Id}}">
        </a>
    {{if .IsMine}}
        <p class="description fake-input" contenteditable="true" placeholder="Description"
           data-multiline>{{.Image.Description}}</p>
    {{else}}
        <div class="description">{{.Image.Description}}</div>
    {{end}}
    </div>
    <div class="sidebar">
    {{if .IsMine}}
        <div class="actions">
            <form class="delete-form" method="post">
                <input type="hidden" name="action" value="delete">
                <input type="hidden" name="id" value="{{.Image.Id}}">
                <input type="submit" value="Delete">
            </form>
            <form class="update-form" method="post">
                <input type="hidden" name="action" value="update">
                <input type="hidden" name="id" value="{{.Image.Id}}">
                <input type="hidden" name="title" value="{{.Image.Title}}">
                <input type="hidden" name="description" value="{{.Image.Description}}">
                <input type="submit" value="Save">
            </form>
        </div>
    {{end}}
        <div class="url">
            <p>Detail Page</p>
            <div>
                <input id="url_full" type="text" value="https://i.k8r.eu/i/{{.Image.Id}}">
                <button class="copy" data-target="#url_full">Copy</button>
            </div>
        </div>
        <div class="url">
            <p>Direct Link</p>
            <div>
                <input id="url_direct" type="text" value="https://i.k8r.eu/{{.Image.Id}}">
                <button class="copy" data-target="#url_direct">Copy</button>
            </div>
        </div>
    </div>
</div>
<script src="/assets/js/component/copy.js"></script>
{{if .IsMine}}
<script src="/assets/js/page_image_detail.js"></script>
{{end}}
{{end}}
